{"ast":null,"code":"import { __awaiter as n } from \"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";\nimport { isChildProxyingEnabled as i, getCurrentFeatureFlagsState as o } from \"../public/featureFlags.js\";\nimport { flushMessageQueue as s, getMessageIdsAsLogString as e } from \"./communicationUtils.js\";\nimport { callHandler as r } from \"./handlers.js\";\nimport { deserializeMessageRequest as t, serializeMessageResponse as d } from \"./messageObjects.js\";\nimport { getLogger as a, getApiVersionTag as u } from \"./telemetry.js\";\nconst c = a(\"childProxyingCommunication\");\nclass l {}\nfunction g() {\n  l.window = null, l.origin = null, l.messageQueue = [];\n}\nfunction m() {\n  return !!i() && !!l.window;\n}\nfunction f(n, o) {\n  return !!i() && (l.window && !l.window.closed && n !== l.window || (l.window = n, l.origin = o), l.window && l.window.closed ? (l.window = null, l.origin = null, !1) : l.window === n);\n}\nfunction w(i, d, a, c) {\n  return n(this, void 0, void 0, function* () {\n    l.window === d && (s(l.window, l.origin, l.messageQueue, \"child\"), function (n, i, s) {\n      if (void 0 === n.data.id || void 0 === n.data.func) return;\n      const d = t(n.data),\n        [a, c] = r(d.func, d.args);\n      if (a && void 0 !== c) return p(\"Handler called in response to message %s from child. Returning response from handler to child, action: %s.\", e(d), d.func), void h(d.id, d.uuid, Array.isArray(c) ? c : [c]);\n      p(\"No handler for message %s from child found; relaying message on to parent, action: %s. Relayed message will have a new id.\", e(d), d.func), function (n, i, s) {\n        const r = i(u(\"v2\", \"tasks.startTask\"), n.func, n.args, !0, n.teamsJsInstanceId),\n          t = l.origin;\n        s(r.uuid, function () {\n          if (!l.window) return;\n          if (!o().disableEnforceOriginMatchForChildResponses && t !== l.origin) return void p(\"Origin of child window has changed, not sending response back to child window\");\n          for (var _len = arguments.length, i = new Array(_len), _key = 0; _key < _len; _key++) {\n            i[_key] = arguments[_key];\n          }\n          const s = i.pop();\n          p(\"Message from parent being relayed to child, id: %s\", e(n)), h(n.id, n.uuid, i, s);\n        });\n      }(d, i, s);\n    }(i, a, c));\n  });\n}\nl.messageQueue = [];\nconst p = c.extend(\"handleIncomingMessageFromChild\");\nfunction h(n, i, o, s) {\n  const r = l.window,\n    t = function (n, i, o, s) {\n      return {\n        id: n,\n        uuid: i,\n        args: o || [],\n        isPartialResponse: s\n      };\n    }(n, i, o, s),\n    a = d(t),\n    u = l.origin;\n  r && u && (p(\"Sending message %s to %s via postMessage, args = %o\", e(a), \"child\", a.args), r.postMessage(a, u));\n}\nfunction v(n, i) {\n  const o = l.window,\n    s = function (n, i) {\n      return {\n        func: n,\n        args: i || []\n      };\n    }(n, i),\n    e = l.origin;\n  o && e ? o.postMessage(s, e) : l.messageQueue.push(s);\n}\nexport { w as handleIncomingMessageFromChild, v as sendMessageEventToChild, m as shouldEventBeRelayedToChild, f as shouldProcessChildMessage, g as uninitializeChildCommunication };","map":{"version":3,"names":["__awaiter","n","isChildProxyingEnabled","i","getCurrentFeatureFlagsState","o","flushMessageQueue","s","getMessageIdsAsLogString","e","callHandler","r","deserializeMessageRequest","t","serializeMessageResponse","d","getLogger","a","getApiVersionTag","u","c","l","g","window","origin","messageQueue","m","f","closed","w","data","id","func","args","p","h","uuid","Array","isArray","teamsJsInstanceId","disableEnforceOriginMatchForChildResponses","_len","arguments","length","_key","pop","extend","isPartialResponse","postMessage","v","push","handleIncomingMessageFromChild","sendMessageEventToChild","shouldEventBeRelayedToChild","shouldProcessChildMessage","uninitializeChildCommunication"],"sources":["D:/KattSafe/pdf-qa-frontend/node_modules/@microsoft/teams-js/dist/esm/packages/teams-js/src/internal/childCommunication.js"],"sourcesContent":["import{__awaiter as n}from\"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";import{isChildProxyingEnabled as i,getCurrentFeatureFlagsState as o}from\"../public/featureFlags.js\";import{flushMessageQueue as s,getMessageIdsAsLogString as e}from\"./communicationUtils.js\";import{callHandler as r}from\"./handlers.js\";import{deserializeMessageRequest as t,serializeMessageResponse as d}from\"./messageObjects.js\";import{getLogger as a,getApiVersionTag as u}from\"./telemetry.js\";const c=a(\"childProxyingCommunication\");class l{}function g(){l.window=null,l.origin=null,l.messageQueue=[]}function m(){return!!i()&&!!l.window}function f(n,o){return!!i()&&(l.window&&!l.window.closed&&n!==l.window||(l.window=n,l.origin=o),l.window&&l.window.closed?(l.window=null,l.origin=null,!1):l.window===n)}function w(i,d,a,c){return n(this,void 0,void 0,(function*(){l.window===d&&(s(l.window,l.origin,l.messageQueue,\"child\"),function(n,i,s){if(void 0===n.data.id||void 0===n.data.func)return;const d=t(n.data),[a,c]=r(d.func,d.args);if(a&&void 0!==c)return p(\"Handler called in response to message %s from child. Returning response from handler to child, action: %s.\",e(d),d.func),void h(d.id,d.uuid,Array.isArray(c)?c:[c]);p(\"No handler for message %s from child found; relaying message on to parent, action: %s. Relayed message will have a new id.\",e(d),d.func),function(n,i,s){const r=i(u(\"v2\",\"tasks.startTask\"),n.func,n.args,!0,n.teamsJsInstanceId),t=l.origin;s(r.uuid,((...i)=>{if(!l.window)return;if(!o().disableEnforceOriginMatchForChildResponses&&t!==l.origin)return void p(\"Origin of child window has changed, not sending response back to child window\");const s=i.pop();p(\"Message from parent being relayed to child, id: %s\",e(n)),h(n.id,n.uuid,i,s)}))}(d,i,s)}(i,a,c))}))}l.messageQueue=[];const p=c.extend(\"handleIncomingMessageFromChild\");function h(n,i,o,s){const r=l.window,t=function(n,i,o,s){return{id:n,uuid:i,args:o||[],isPartialResponse:s}}(n,i,o,s),a=d(t),u=l.origin;r&&u&&(p(\"Sending message %s to %s via postMessage, args = %o\",e(a),\"child\",a.args),r.postMessage(a,u))}function v(n,i){const o=l.window,s=function(n,i){return{func:n,args:i||[]}}(n,i),e=l.origin;o&&e?o.postMessage(s,e):l.messageQueue.push(s)}export{w as handleIncomingMessageFromChild,v as sendMessageEventToChild,m as shouldEventBeRelayedToChild,f as shouldProcessChildMessage,g as uninitializeChildCommunication};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
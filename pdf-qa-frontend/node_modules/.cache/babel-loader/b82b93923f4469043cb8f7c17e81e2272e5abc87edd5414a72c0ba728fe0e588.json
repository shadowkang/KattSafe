{"ast":null,"code":"import { __awaiter as i } from \"../../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";\nimport { sendAndUnwrap as o } from \"../../internal/communication.js\";\nimport { ensureInitialized as t } from \"../../internal/internalAPIs.js\";\nimport { getLogger as r, getApiVersionTag as e } from \"../../internal/telemetry.js\";\nimport { errorNotSupportedOnPlatform as n } from \"../../public/constants.js\";\nimport { isSdkError as l, LegalAgeGroupClassification as s } from \"../../public/interfaces.js\";\nimport { runtime as a } from \"../../public/runtime.js\";\nconst u = r(\"copilot\");\nfunction p() {\n  var i, o;\n  return t(a) && (!!(null === (i = a.hostVersionsInfo) || void 0 === i ? void 0 : i.appEligibilityInformation) || !!(null === (o = a.supports.copilot) || void 0 === o ? void 0 : o.eligibility));\n}\nfunction d(r) {\n  var d, m, f;\n  return i(this, void 0, void 0, function* () {\n    if (t(a), !p()) throw new Error(\"Error code: \".concat(n.errorCode, \", message: Not supported on platform\"));\n    if ((null === (d = a.hostVersionsInfo) || void 0 === d ? void 0 : d.appEligibilityInformation) && !r) return u(\"Eligibility information is already available on runtime.\"), a.hostVersionsInfo.appEligibilityInformation;\n    u(\"Eligibility information is not available on runtime. Requesting from host.\");\n    const i = yield o(e(\"v2\", \"copilot.eligibility.getEligibilityInfo\"), \"copilot.eligibility.getEligibilityInfo\", r);\n    if (l(i)) throw new Error(\"Error code: \".concat(i.errorCode, \", message: \").concat(null !== (m = i.message) && void 0 !== m ? m : \"Failed to get eligibility information from the host.\"));\n    if (!function (i) {\n      if (void 0 === i.ageGroup || void 0 === i.cohort || void 0 === i.userClassification || void 0 === i.isCopilotEligible || void 0 === i.isCopilotEnabledRegion || void 0 === i.isOptedOutByAdmin || i.featureSet && (void 0 === i.featureSet.serverFeatures || void 0 === i.featureSet.uxFeatures)) return !1;\n      return !0;\n    }(i)) throw new Error(\"Error deserializing eligibility information\");\n    return \"nonadult\" === (null === (f = i.ageGroup) || void 0 === f ? void 0 : f.toLowerCase()) && (i.ageGroup = s.NotAdult), i;\n  });\n}\nexport { d as getEligibilityInfo, p as isSupported };","map":{"version":3,"names":["__awaiter","i","sendAndUnwrap","o","ensureInitialized","t","getLogger","r","getApiVersionTag","e","errorNotSupportedOnPlatform","n","isSdkError","l","LegalAgeGroupClassification","s","runtime","a","u","p","hostVersionsInfo","appEligibilityInformation","supports","copilot","eligibility","d","m","f","Error","concat","errorCode","message","ageGroup","cohort","userClassification","isCopilotEligible","isCopilotEnabledRegion","isOptedOutByAdmin","featureSet","serverFeatures","uxFeatures","toLowerCase","NotAdult","getEligibilityInfo","isSupported"],"sources":["D:/KattSafe/pdf-qa-frontend/node_modules/@microsoft/teams-js/dist/esm/packages/teams-js/src/private/copilot/eligibility.js"],"sourcesContent":["import{__awaiter as i}from\"../../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";import{sendAndUnwrap as o}from\"../../internal/communication.js\";import{ensureInitialized as t}from\"../../internal/internalAPIs.js\";import{getLogger as r,getApiVersionTag as e}from\"../../internal/telemetry.js\";import{errorNotSupportedOnPlatform as n}from\"../../public/constants.js\";import{isSdkError as l,LegalAgeGroupClassification as s}from\"../../public/interfaces.js\";import{runtime as a}from\"../../public/runtime.js\";const u=r(\"copilot\");function p(){var i,o;return t(a)&&(!!(null===(i=a.hostVersionsInfo)||void 0===i?void 0:i.appEligibilityInformation)||!!(null===(o=a.supports.copilot)||void 0===o?void 0:o.eligibility))}function d(r){var d,m,f;return i(this,void 0,void 0,(function*(){if(t(a),!p())throw new Error(`Error code: ${n.errorCode}, message: Not supported on platform`);if((null===(d=a.hostVersionsInfo)||void 0===d?void 0:d.appEligibilityInformation)&&!r)return u(\"Eligibility information is already available on runtime.\"),a.hostVersionsInfo.appEligibilityInformation;u(\"Eligibility information is not available on runtime. Requesting from host.\");const i=yield o(e(\"v2\",\"copilot.eligibility.getEligibilityInfo\"),\"copilot.eligibility.getEligibilityInfo\",r);if(l(i))throw new Error(`Error code: ${i.errorCode}, message: ${null!==(m=i.message)&&void 0!==m?m:\"Failed to get eligibility information from the host.\"}`);if(!function(i){if(void 0===i.ageGroup||void 0===i.cohort||void 0===i.userClassification||void 0===i.isCopilotEligible||void 0===i.isCopilotEnabledRegion||void 0===i.isOptedOutByAdmin||i.featureSet&&(void 0===i.featureSet.serverFeatures||void 0===i.featureSet.uxFeatures))return!1;return!0}(i))throw new Error(\"Error deserializing eligibility information\");return\"nonadult\"===(null===(f=i.ageGroup)||void 0===f?void 0:f.toLowerCase())&&(i.ageGroup=s.NotAdult),i}))}export{d as getEligibilityInfo,p as isSupported};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
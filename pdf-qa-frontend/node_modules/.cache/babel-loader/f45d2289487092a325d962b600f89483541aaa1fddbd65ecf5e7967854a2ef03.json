{"ast":null,"code":"import React from'react';import{Bot,User,Copy,FileText,Award,Globe}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessageBubble=_ref=>{let{message,onCopy}=_ref;const{type,content,timestamp,confidence,citations,language,pdf,ocrMethod,isError}=message;const formatTime=date=>{return date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};const getConfidenceColor=conf=>{if(conf>=0.8)return'#28a745';// Green\nif(conf>=0.6)return'#ffc107';// Yellow\nreturn'#dc3545';// Red\n};const getConfidenceLabel=conf=>{if(conf>=0.8)return'High';if(conf>=0.6)return'Medium';return'Low';};return/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble \".concat(type,\"-message \").concat(isError?'error-message':'',\" fade-in\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-avatar\",children:type==='bot'?/*#__PURE__*/_jsx(Bot,{size:16}):/*#__PURE__*/_jsx(User,{size:16})}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:content}),type==='bot'&&!isError&&/*#__PURE__*/_jsxs(\"div\",{className:\"message-metadata\",children:[confidence!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"confidence-indicator\",children:[/*#__PURE__*/_jsx(Award,{size:12}),/*#__PURE__*/_jsxs(\"span\",{className:\"confidence-value\",style:{color:getConfidenceColor(confidence)},children:[getConfidenceLabel(confidence),\" Confidence (\",(confidence*100).toFixed(0),\"%)\"]})]}),language&&/*#__PURE__*/_jsxs(\"div\",{className:\"language-indicator\",children:[/*#__PURE__*/_jsx(Globe,{size:12}),/*#__PURE__*/_jsx(\"span\",{children:language==='en'?'English':'Chinese'})]}),pdf&&/*#__PURE__*/_jsxs(\"div\",{className:\"source-indicator\",children:[/*#__PURE__*/_jsx(FileText,{size:12}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Source: \",pdf]})]})]}),citations&&citations.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"citations\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"citations-title\",children:\"\\uD83D\\uDCDA Sources:\"}),citations.map((citation,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"citation-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"citation-page\",children:[\"Page \",citation.page]}),/*#__PURE__*/_jsxs(\"div\",{className:\"citation-quote\",children:[\"\\\"\",citation.quote,\"\\\"\"]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-time\",children:formatTime(timestamp)}),/*#__PURE__*/_jsx(\"button\",{className:\"copy-button\",onClick:()=>onCopy(content),title:\"Copy message\",children:/*#__PURE__*/_jsx(Copy,{size:12})})]})]})]});};export default MessageBubble;","map":{"version":3,"names":["React","Bot","User","Copy","FileText","Award","Globe","jsx","_jsx","jsxs","_jsxs","MessageBubble","_ref","message","onCopy","type","content","timestamp","confidence","citations","language","pdf","ocrMethod","isError","formatTime","date","toLocaleTimeString","hour","minute","getConfidenceColor","conf","getConfidenceLabel","className","concat","children","size","style","color","toFixed","length","map","citation","index","page","quote","onClick","title"],"sources":["D:/KattSafe/pdf-qa-frontend/src/components/MessageBubble.js"],"sourcesContent":["import React from 'react';\r\nimport { Bot, User, Copy, FileText, Award, Globe } from 'lucide-react';\r\n\r\nconst MessageBubble = ({ message, onCopy }) => {\r\n  const { type, content, timestamp, confidence, citations, language, pdf, ocrMethod, isError } = message;\r\n\r\n  const formatTime = (date) => {\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  const getConfidenceColor = (conf) => {\r\n    if (conf >= 0.8) return '#28a745'; // Green\r\n    if (conf >= 0.6) return '#ffc107'; // Yellow\r\n    return '#dc3545'; // Red\r\n  };\r\n\r\n  const getConfidenceLabel = (conf) => {\r\n    if (conf >= 0.8) return 'High';\r\n    if (conf >= 0.6) return 'Medium';\r\n    return 'Low';\r\n  };\r\n\r\n  return (\r\n    <div className={`message-bubble ${type}-message ${isError ? 'error-message' : ''} fade-in`}>\r\n      <div className=\"message-avatar\">\r\n        {type === 'bot' ? <Bot size={16} /> : <User size={16} />}\r\n      </div>\r\n      \r\n      <div className=\"message-content\">\r\n        <div className=\"message-text\">\r\n          {content}\r\n        </div>\r\n        \r\n        {/* Bot message metadata */}\r\n        {type === 'bot' && !isError && (\r\n          <div className=\"message-metadata\">\r\n            {confidence !== null && (\r\n              <div className=\"confidence-indicator\">\r\n                <Award size={12} />\r\n                <span \r\n                  className=\"confidence-value\"\r\n                  style={{ color: getConfidenceColor(confidence) }}\r\n                >\r\n                  {getConfidenceLabel(confidence)} Confidence ({(confidence * 100).toFixed(0)}%)\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            {language && (\r\n              <div className=\"language-indicator\">\r\n                <Globe size={12} />\r\n                <span>{language === 'en' ? 'English' : 'Chinese'}</span>\r\n              </div>\r\n            )}\r\n            \r\n            {pdf && (\r\n              <div className=\"source-indicator\">\r\n                <FileText size={12} />\r\n                <span>Source: {pdf}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Citations */}\r\n        {citations && citations.length > 0 && (\r\n          <div className=\"citations\">\r\n            <div className=\"citations-title\">ðŸ“š Sources:</div>\r\n            {citations.map((citation, index) => (\r\n              <div key={index} className=\"citation-item\">\r\n                <div className=\"citation-page\">Page {citation.page}</div>\r\n                <div className=\"citation-quote\">\"{citation.quote}\"</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"message-footer\">\r\n          <span className=\"message-time\">{formatTime(timestamp)}</span>\r\n          <button \r\n            className=\"copy-button\"\r\n            onClick={() => onCopy(content)}\r\n            title=\"Copy message\"\r\n          >\r\n            <Copy size={12} />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageBubble;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { VideoFrameTick as t } from \"./videoFrameTick.js\";\nclass s {\n  constructor(t, s) {\n    this.reportStatisticsResult = s, this.sampleCount = 0, this.distributionBins = new Uint32Array(t);\n  }\n  processStarts(s, e, i, r) {\n    t.tick(), this.suitableForThisSession(s, e, i, r) || this.reportAndResetSession(this.getStatistics(), s, r, e, i), this.start();\n  }\n  processEnds() {\n    const t = performance.now() - this.frameProcessingStartedAt,\n      s = Math.floor(Math.max(0, Math.min(this.distributionBins.length - 1, t)));\n    this.distributionBins[s] += 1, this.sampleCount += 1;\n  }\n  getStatistics() {\n    return this.currentSession ? {\n      effectId: this.currentSession.effectId,\n      effectParam: this.currentSession.effectParam,\n      frameHeight: this.currentSession.frameHeight,\n      frameWidth: this.currentSession.frameWidth,\n      duration: performance.now() - this.currentSession.startedAtInMs,\n      sampleCount: this.sampleCount,\n      distributionBins: this.distributionBins.slice()\n    } : null;\n  }\n  start() {\n    this.frameProcessingStartedAt = performance.now();\n  }\n  suitableForThisSession(t, s, e, i) {\n    return this.currentSession && this.currentSession.effectId === t && this.currentSession.effectParam === i && this.currentSession.frameWidth === s && this.currentSession.frameHeight === e;\n  }\n  reportAndResetSession(s, e, i, r, n) {\n    s && this.reportStatisticsResult(s), this.resetCurrentSession(this.getNextTimeout(e, this.currentSession), e, i, r, n), this.timeoutId && t.clearTimeout(this.timeoutId), this.timeoutId = t.setTimeout((() => this.reportAndResetSession(this.getStatistics(), e, i, r, n)).bind(this), this.currentSession.timeoutInMs);\n  }\n  resetCurrentSession(t, s, e, i, r) {\n    this.currentSession = {\n      startedAtInMs: performance.now(),\n      timeoutInMs: t,\n      effectId: s,\n      effectParam: e,\n      frameWidth: i,\n      frameHeight: r\n    }, this.sampleCount = 0, this.distributionBins.fill(0);\n  }\n  getNextTimeout(t, e) {\n    return e && e.effectId === t ? Math.min(s.maxSessionTimeoutInMs, 2 * e.timeoutInMs) : s.initialSessionTimeoutInMs;\n  }\n}\ns.initialSessionTimeoutInMs = 1e3, s.maxSessionTimeoutInMs = 3e4;\nexport { s as VideoPerformanceStatistics };","map":{"version":3,"names":["VideoFrameTick","t","s","constructor","reportStatisticsResult","sampleCount","distributionBins","Uint32Array","processStarts","e","i","r","tick","suitableForThisSession","reportAndResetSession","getStatistics","start","processEnds","performance","now","frameProcessingStartedAt","Math","floor","max","min","length","currentSession","effectId","effectParam","frameHeight","frameWidth","duration","startedAtInMs","slice","n","resetCurrentSession","getNextTimeout","timeoutId","clearTimeout","setTimeout","bind","timeoutInMs","fill","maxSessionTimeoutInMs","initialSessionTimeoutInMs","VideoPerformanceStatistics"],"sources":["D:/KattSafe/pdf-qa-frontend/node_modules/@microsoft/teams-js/dist/esm/packages/teams-js/src/internal/videoPerformanceStatistics.js"],"sourcesContent":["import{VideoFrameTick as t}from\"./videoFrameTick.js\";class s{constructor(t,s){this.reportStatisticsResult=s,this.sampleCount=0,this.distributionBins=new Uint32Array(t)}processStarts(s,e,i,r){t.tick(),this.suitableForThisSession(s,e,i,r)||this.reportAndResetSession(this.getStatistics(),s,r,e,i),this.start()}processEnds(){const t=performance.now()-this.frameProcessingStartedAt,s=Math.floor(Math.max(0,Math.min(this.distributionBins.length-1,t)));this.distributionBins[s]+=1,this.sampleCount+=1}getStatistics(){return this.currentSession?{effectId:this.currentSession.effectId,effectParam:this.currentSession.effectParam,frameHeight:this.currentSession.frameHeight,frameWidth:this.currentSession.frameWidth,duration:performance.now()-this.currentSession.startedAtInMs,sampleCount:this.sampleCount,distributionBins:this.distributionBins.slice()}:null}start(){this.frameProcessingStartedAt=performance.now()}suitableForThisSession(t,s,e,i){return this.currentSession&&this.currentSession.effectId===t&&this.currentSession.effectParam===i&&this.currentSession.frameWidth===s&&this.currentSession.frameHeight===e}reportAndResetSession(s,e,i,r,n){s&&this.reportStatisticsResult(s),this.resetCurrentSession(this.getNextTimeout(e,this.currentSession),e,i,r,n),this.timeoutId&&t.clearTimeout(this.timeoutId),this.timeoutId=t.setTimeout((()=>this.reportAndResetSession(this.getStatistics(),e,i,r,n)).bind(this),this.currentSession.timeoutInMs)}resetCurrentSession(t,s,e,i,r){this.currentSession={startedAtInMs:performance.now(),timeoutInMs:t,effectId:s,effectParam:e,frameWidth:i,frameHeight:r},this.sampleCount=0,this.distributionBins.fill(0)}getNextTimeout(t,e){return e&&e.effectId===t?Math.min(s.maxSessionTimeoutInMs,2*e.timeoutInMs):s.initialSessionTimeoutInMs}}s.initialSessionTimeoutInMs=1e3,s.maxSessionTimeoutInMs=3e4;export{s as VideoPerformanceStatistics};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}